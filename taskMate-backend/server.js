/*Overall Aim: Create a express server for the todolist project.*/
//---------------------------------------------------------------------------------------------------------------
//Import needed modules
//---------------------------------------------------------------------------------------------------------------
import express from "express"
import cors from "cors"
import list from "./api/route.js"
//---------------------------------------------------------------------------------------------------------------

//---------------------------------------------------------------------------------------------------------------
//Create a instance for express
//---------------------------------------------------------------------------------------------------------------
const app = express();
//---------------------------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------------------------
//Create middleware for cross origin resource sharing and express.json()
//- This line sets up the CORS middleware for the application, allowing cross-origin requests from other domains.
//----------------------------------------------------------------------------------------------------------------
app.use(cors());
//----------------------------------------------------------------------------------------------------------------
//- This line sets up the application to parse incoming requests with JSON payloads.
//----------------------------------------------------------------------------------------------------------------
app.use(express.json());
//----------------------------------------------------------------------------------------------------------------

//----------------------------------------------------------------------------------------------------------------
/*This line sets up a route handler for requests that match the path "/api/v1/todolist", using the 
"list" module imported earlier to handle the requests.*/
app.use("/api/v1/todolist",list);
/*This line sets up a "catch-all" route handler for any requests that don't match any of the previously 
defined routes. It returns a 404 error with a JSON response containing an "error" field set to "not found".*/
//----------------------------------------------------------------------------------------------------------------
app.use("*",(req,res)=>{
    res.status(404).json({"error":"Not Found"});
})
//---------------------------------------------------------------------------------------------------------------

//---------------------------------------------------------------------------------------------------------------
//This line exports the Express application instance so that it can be used in other parts of the program.
//---------------------------------------------------------------------------------------------------------------
export default app;
//---------------------------------------------------------------------------------------------------------------

